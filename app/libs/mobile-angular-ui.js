;(function(){'use strict';function FastClick(layer,options){var oldOnClick;options=options||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=options.touchBoundary||10;this.layer=layer;this.tapDelay=options.tapDelay||200;this.tapTimeout=options.tapTimeout||700;if(FastClick.notNeeded(layer)){return;}function bind(method,context){return function(){return method.apply(context,arguments);};}var methods=['onMouse','onClick','onTouchStart','onTouchMove','onTouchEnd','onTouchCancel'];var context=this;for(var i=0,l=methods.length;i<l;i++){context[methods[i]]=bind(context[methods[i]],context);}if(deviceIsAndroid){layer.addEventListener('mouseover',this.onMouse,true);layer.addEventListener('mousedown',this.onMouse,true);layer.addEventListener('mouseup',this.onMouse,true);}layer.addEventListener('click',this.onClick,true);layer.addEventListener('touchstart',this.onTouchStart,false);layer.addEventListener('touchmove',this.onTouchMove,false);layer.addEventListener('touchend',this.onTouchEnd,false);layer.addEventListener('touchcancel',this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){layer.removeEventListener=function(type,callback,capture){var rmv=Node.prototype.removeEventListener;if(type==='click'){rmv.call(layer,type,callback.hijacked||callback,capture);}else{rmv.call(layer,type,callback,capture);}};layer.addEventListener=function(type,callback,capture){var adv=Node.prototype.addEventListener;if(type==='click'){adv.call(layer,type,callback.hijacked||(callback.hijacked=function(event){if(!event.propagationStopped){callback(event);}}),capture);}else{adv.call(layer,type,callback,capture);}};}if(typeof layer.onclick==='function'){oldOnClick=layer.onclick;layer.addEventListener('click',function(event){oldOnClick(event);},false);layer.onclick=null;}}var deviceIsWindowsPhone=navigator.userAgent.indexOf("Windows Phone")>=0;var deviceIsAndroid=navigator.userAgent.indexOf('Android')>0&&!deviceIsWindowsPhone;var deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent)&&!deviceIsWindowsPhone;var deviceIsIOS4=deviceIsIOS&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);var deviceIsIOSWithBadTarget=deviceIsIOS&&(/OS [6-7]_\d/).test(navigator.userAgent);var deviceIsBlackBerry10=navigator.userAgent.indexOf('BB10')>0;FastClick.prototype.needsClick=function(target){switch(target.nodeName.toLowerCase()){case'button':case'select':case'textarea':if(target.disabled){return true;}break;case'input':if((deviceIsIOS&&target.type==='file')||target.disabled){return true;}break;case'label':case'iframe':case'video':return true;}return(/\bneedsclick\b/).test(target.className);};FastClick.prototype.needsFocus=function(target){switch(target.nodeName.toLowerCase()){case'textarea':return true;case'select':return!deviceIsAndroid;case'input':switch(target.type){case'button':case'checkbox':case'file':case'image':case'radio':case'submit':return false;}return!target.disabled&&!target.readOnly;default:return(/\bneedsfocus\b/).test(target.className);}};FastClick.prototype.sendClick=function(targetElement,event){var clickEvent,touch;if(document.activeElement&&document.activeElement!==targetElement){document.activeElement.blur();}touch=event.changedTouches[0];clickEvent=document.createEvent('MouseEvents');clickEvent.initMouseEvent(this.determineEventType(targetElement),true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);clickEvent.forwardedTouchEvent=true;targetElement.dispatchEvent(clickEvent);};FastClick.prototype.determineEventType=function(targetElement){if(deviceIsAndroid&&targetElement.tagName.toLowerCase()==='select'){return'mousedown';}return'click';};FastClick.prototype.focus=function(targetElement){var length;if(deviceIsIOS&&targetElement.setSelectionRange&&targetElement.type.indexOf('date')!==0&&targetElement.type!=='time'&&targetElement.type!=='month'){length=targetElement.value.length;targetElement.setSelectionRange(length,length);}else{targetElement.focus();}};FastClick.prototype.updateScrollParent=function(targetElement){var scrollParent,parentElement;scrollParent=targetElement.fastClickScrollParent;if(!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;do{if(parentElement.scrollHeight>parentElement.offsetHeight){scrollParent=parentElement;targetElement.fastClickScrollParent=parentElement;break;}parentElement=parentElement.parentElement;}while(parentElement);}if(scrollParent){scrollParent.fastClickLastScrollTop=scrollParent.scrollTop;}};FastClick.prototype.getTargetElementFromEventTarget=function(eventTarget){if(eventTarget.nodeType===Node.TEXT_NODE){return eventTarget.parentNode;}return eventTarget;};FastClick.prototype.onTouchStart=function(event){var targetElement,touch,selection;if(event.targetTouches.length>1){return true;}targetElement=this.getTargetElementFromEventTarget(event.target);touch=event.targetTouches[0];if(deviceIsIOS){selection=window.getSelection();if(selection.rangeCount&&!selection.isCollapsed){return true;}if(!deviceIsIOS4){if(touch.identifier&&touch.identifier===this.lastTouchIdentifier){event.preventDefault();return false;}this.lastTouchIdentifier=touch.identifier;this.updateScrollParent(targetElement);}}this.trackingClick=true;this.trackingClickStart=event.timeStamp;this.targetElement=targetElement;this.touchStartX=touch.pageX;this.touchStartY=touch.pageY;if((event.timeStamp-this.lastClickTime)<this.tapDelay){event.preventDefault();}return true;};FastClick.prototype.touchHasMoved=function(event){var touch=event.changedTouches[0],boundary=this.touchBoundary;if(Math.abs(touch.pageX-this.touchStartX)>boundary||Math.abs(touch.pageY-this.touchStartY)>boundary){return true;}return false;};FastClick.prototype.onTouchMove=function(event){if(!this.trackingClick){return true;}if(this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event)){this.trackingClick=false;this.targetElement=null;}return true;};FastClick.prototype.findControl=function(labelElement){if(labelElement.control!==undefined){return labelElement.control;}if(labelElement.htmlFor){return document.getElementById(labelElement.htmlFor);}return labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');};FastClick.prototype.onTouchEnd=function(event){var forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=this.targetElement;if(!this.trackingClick){return true;}if((event.timeStamp-this.lastClickTime)<this.tapDelay){this.cancelNextClick=true;return true;}if((event.timeStamp-this.trackingClickStart)>this.tapTimeout){return true;}this.cancelNextClick=false;this.lastClickTime=event.timeStamp;trackingClickStart=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(deviceIsIOSWithBadTarget){touch=event.changedTouches[0];targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement;targetElement.fastClickScrollParent=this.targetElement.fastClickScrollParent;}targetTagName=targetElement.tagName.toLowerCase();if(targetTagName==='label'){forElement=this.findControl(targetElement);if(forElement){this.focus(targetElement);if(deviceIsAndroid){return false;}targetElement=forElement;}}else if(this.needsFocus(targetElement)){if((event.timeStamp-trackingClickStart)>100||(deviceIsIOS&&window.top!==window&&targetTagName==='input')){this.targetElement=null;return false;}this.focus(targetElement);this.sendClick(targetElement,event);if(!deviceIsIOS||targetTagName!=='select'){this.targetElement=null;event.preventDefault();}return false;}if(deviceIsIOS&&!deviceIsIOS4){scrollParent=targetElement.fastClickScrollParent;if(scrollParent&&scrollParent.fastClickLastScrollTop!==scrollParent.scrollTop){return true;}}if(!this.needsClick(targetElement)){event.preventDefault();this.sendClick(targetElement,event);}return false;};FastClick.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null;};FastClick.prototype.onMouse=function(event){if(!this.targetElement){return true;}if(event.forwardedTouchEvent){return true;}if(!event.cancelable){return true;}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(event.stopImmediatePropagation){event.stopImmediatePropagation();}else{event.propagationStopped=true;}event.stopPropagation();event.preventDefault();return false;}return true;};FastClick.prototype.onClick=function(event){var permitted;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true;}if(event.target.type==='submit'&&event.detail===0){return true;}permitted=this.onMouse(event);if(!permitted){this.targetElement=null;}return permitted;};FastClick.prototype.destroy=function(){var layer=this.layer;if(deviceIsAndroid){layer.removeEventListener('mouseover',this.onMouse,true);layer.removeEventListener('mousedown',this.onMouse,true);layer.removeEventListener('mouseup',this.onMouse,true);}layer.removeEventListener('click',this.onClick,true);layer.removeEventListener('touchstart',this.onTouchStart,false);layer.removeEventListener('touchmove',this.onTouchMove,false);layer.removeEventListener('touchend',this.onTouchEnd,false);layer.removeEventListener('touchcancel',this.onTouchCancel,false);};FastClick.notNeeded=function(layer){var metaViewport;var chromeVersion;var blackberryVersion;var firefoxVersion;if(typeof window.ontouchstart==='undefined'){return true;}chromeVersion=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(chromeVersion){if(deviceIsAndroid){metaViewport=document.querySelector('meta[name=viewport]');if(metaViewport){if(metaViewport.content.indexOf('user-scalable=no')!==-1){return true;}if(chromeVersion>31&&document.documentElement.scrollWidth<=window.outerWidth){return true;}}}else{return true;}}if(deviceIsBlackBerry10){blackberryVersion=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(blackberryVersion[1]>=10&&blackberryVersion[2]>=3){metaViewport=document.querySelector('meta[name=viewport]');if(metaViewport){if(metaViewport.content.indexOf('user-scalable=no')!==-1){return true;}if(document.documentElement.scrollWidth<=window.outerWidth){return true;}}}}if(layer.style.msTouchAction==='none'||layer.style.touchAction==='manipulation'){return true;}firefoxVersion=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(firefoxVersion>=27){metaViewport=document.querySelector('meta[name=viewport]');if(metaViewport&&(metaViewport.content.indexOf('user-scalable=no')!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true;}}if(layer.style.touchAction==='none'||layer.style.touchAction==='manipulation'){return true;}return false;};FastClick.attach=function(layer,options){return new FastClick(layer,options);};if(typeof define==='function'&&typeof define.amd==='object'&&define.amd){define(function(){return FastClick;});}else if(typeof module!=='undefined'&&module.exports){module.exports=FastClick.attach;module.exports.FastClick=FastClick;}else{window.FastClick=FastClick;}}());(function(){'use strict';angular.module('mobile-angular-ui.core.activeLinks',[]).provider('setupActiveLinks',['$locationProvider',function($locationProvider){this.$get=['$document','$location',function($document,$location){return function(){var currentPath=$location.path();var links=$document[0].links;for(var i=0;i<links.length;i++){var link=angular.element(links[i]);var href=link.attr('href');if(!href){return link.removeClass('active');}var html5Mode=$locationProvider.html5Mode().enabled;if(!html5Mode){var linkPrefix='#'+$locationProvider.hashPrefix();if(href.slice(0,linkPrefix.length)===linkPrefix){href=href.slice(linkPrefix.length);}else{return link.removeClass('active');}}if(href.charAt(0)!=='/'){return link.removeClass('active');}href=href.split('#')[0].split('?')[0];if(href===currentPath){link.addClass('active');}else{link.removeClass('active');}}};}];}]).run(['$rootScope','setupActiveLinks',function($rootScope,setupActiveLinks){$rootScope.$on('$locationChangeSuccess',setupActiveLinks);$rootScope.$on('$includeContentLoaded',setupActiveLinks);}]);})();(function(){'use strict';angular.module('mobile-angular-ui.core.capture',[]).run(['Capture','$rootScope',function(Capture,$rootScope){$rootScope.$on('$routeChangeSuccess',function(){Capture.resetAll();});}]).factory('Capture',['$compile',function($compile){var yielders={};return{yielders:yielders,resetAll:function(){for(var name in yielders){if(yielders.hasOwnProperty(name)){this.resetYielder(name);}}},resetYielder:function(name){var b=yielders[name];this.setContentFor(name,b.defaultContent,b.defaultScope);},putYielder:function(name,element,defaultScope,defaultContent){var yielder={};yielder.name=name;yielder.element=element;yielder.defaultContent=defaultContent||'';yielder.defaultScope=defaultScope;yielders[name]=yielder;},getYielder:function(name){return yielders[name];},removeYielder:function(name){delete yielders[name];},setContentFor:function(name,content,scope){var b=yielders[name];if(!b){return;}b.element.html(content);$compile(b.element.contents())(scope);}};}]).directive('uiContentFor',['Capture',function(Capture){return{compile:function(tElem,tAttrs){var rawContent=tElem.html();if(tAttrs.uiDuplicate===null||tAttrs.uiDuplicate===undefined){tElem.html('');tElem.remove();}return function(scope,elem,attrs){Capture.setContentFor(attrs.uiContentFor,rawContent,scope);};}};}]).directive('uiYieldTo',['$compile','Capture',function($compile,Capture){return{link:function(scope,element,attr){Capture.putYielder(attr.uiYieldTo,element,scope,element.html());element.on('$destroy',function(){Capture.removeYielder(attr.uiYieldTo);});scope.$on('$destroy',function(){Capture.removeYielder(attr.uiYieldTo);});}};}]);})();(function(){'use strict';var module=angular.module('mobile-angular-ui.core.fastclick',[]);module.run(['$window',function($window){var orgHandler=FastClick.prototype.onTouchEnd;function bind(method,context){return function(){return method.apply(context,arguments);};}FastClick.prototype.onTouchEnd=function(event){if(!event.changedTouches){event.changedTouches=[{}];}orgHandler=bind(orgHandler,this);orgHandler(event);};FastClick.attach($window.document.body);}]);angular.forEach(['select','input','textarea'],function(directiveName){module.directive(directiveName,function(){return{restrict:'E',compile:function(elem){elem.addClass('needsclick');}};});});})();(function(){'use strict';angular.module('mobile-angular-ui.core.outerClick',[]).factory('_mauiIsAncestorOrSelf',function(){return function(element,target){var parent=element;while(parent.length>0){if(parent[0]===target[0]){parent=null;return true;}parent=parent.parent();}parent=null;return false;};}).factory('bindOuterClick',['$document','$timeout','_mauiIsAncestorOrSelf',function($document,$timeout,isAncestorOrSelf){return function(scope,element,outerClickFn,outerClickIf){var handleOuterClick=function(event){if(!isAncestorOrSelf(angular.element(event.target),element)){scope.$apply(function(){outerClickFn(scope,{$event:event});});}};var stopWatching=angular.noop;var t=null;if(outerClickIf){stopWatching=scope.$watch(outerClickIf,function(value){$timeout.cancel(t);if(value){t=$timeout(function(){$document.on('click tap',handleOuterClick);},0);}else{$document.unbind('click tap',handleOuterClick);}});}else{$timeout.cancel(t);$document.on('click tap',handleOuterClick);}scope.$on('$destroy',function(){stopWatching();$document.unbind('click tap',handleOuterClick);});};}]).directive('uiOuterClick',['bindOuterClick','$parse',function(bindOuterClick,$parse){return{restrict:'A',compile:function(elem,attrs){var outerClickFn=$parse(attrs.uiOuterClick);var outerClickIf=attrs.uiOuterClickIf;return function(scope,elem){bindOuterClick(scope,elem,outerClickFn,outerClickIf);};}};}]);})();(function(){'use strict';var module=angular.module('mobile-angular-ui.core.sharedState',[]);module.factory('SharedState',['$rootScope','$log',function($rootScope,$log){var values={};var statusesMeta={};var scopes={};var exclusionGroups={};return{initialize:function(scope,id,options){options=options||{};var isNewScope=scopes[scope]===undefined;var defaultValue=options.defaultValue;var exclusionGroup=options.exclusionGroup;scopes[scope.$id]=scopes[scope.$id]||[];scopes[scope.$id].push(id);if(!statusesMeta[id]){statusesMeta[id]=angular.extend({},options,{references:1});$rootScope.$broadcast('mobile-angular-ui.state.initialized.'+id,defaultValue);if(defaultValue!==undefined){this.setOne(id,defaultValue);}if(exclusionGroup){exclusionGroups[exclusionGroup]=exclusionGroups[exclusionGroup]||{};exclusionGroups[exclusionGroup][id]=true;}}else if(isNewScope){statusesMeta[id].references++;}scope.$on('$destroy',function(){var ids=scopes[scope.$id]||[];for(var i=0;i<ids.length;i++){var status=statusesMeta[ids[i]];if(status.exclusionGroup){delete exclusionGroups[status.exclusionGroup][ids[i]];if(Object.keys(exclusionGroups[status.exclusionGroup]).length===0){delete exclusionGroups[status.exclusionGroup];}}status.references--;if(status.references<=0){delete statusesMeta[ids[i]];delete values[ids[i]];$rootScope.$broadcast('mobile-angular-ui.state.destroyed.'+id);}}delete scopes[scope.$id];});},setOne:function(id,value){if(statusesMeta[id]!==undefined){var prev=values[id];values[id]=value;if(prev!==value){$rootScope.$broadcast('mobile-angular-ui.state.changed.'+id,value,prev);}return value;}$log.warn('Warning: Attempt to set uninitialized shared state: '+id);},setMany:function(map){angular.forEach(map,function(value,id){this.setOne(id,value);},this);},set:function(idOrMap,value){if(!idOrMap){return;}else if(angular.isObject(idOrMap)){this.setMany(idOrMap);}else{this.setOne(idOrMap,value);}},turnOn:function(id){var eg=statusesMeta[id]&&statusesMeta[id].exclusionGroup;if(eg){var egStatuses=Object.keys(exclusionGroups[eg]);for(var i=0;i<egStatuses.length;i++){var item=egStatuses[i];if(item!==id){this.turnOff(item);}}}return this.setOne(id,true);},turnOff:function(id){return this.setOne(id,false);},toggle:function(id){return this.get(id)?this.turnOff(id):this.turnOn(id);},get:function(id){return statusesMeta[id]&&values[id];},isActive:function(id){return Boolean(this.get(id));},active:function(id){return this.isActive(id);},isUndefined:function(id){return statusesMeta[id]===undefined||this.get(id)===undefined;},has:function(id){return statusesMeta[id]!==undefined;},referenceCount:function(id){var status=statusesMeta[id];return status===undefined?0:status.references;},equals:function(id,value){return this.get(id)===value;},eq:function(id,value){return this.equals(id,value);},values:function(){return values;},exclusionGroups:function(){return exclusionGroups;}};}]);var uiBindEvent=function(scope,element,eventNames,fn){eventNames=eventNames||'click tap';element.on(eventNames,function(event){scope.$apply(function(){fn(scope,{$event:event});});});};module.directive('uiSharedState',['SharedState',function(SharedState){return{restrict:'EA',priority:601,link:function(scope,elem,attrs){var id=attrs.uiSharedState||attrs.id;var defaultValueExpr=attrs.uiDefault||attrs.default;var defaultValue=defaultValueExpr?scope.$eval(defaultValueExpr):undefined;SharedState.initialize(scope,id,{defaultValue:defaultValue,exclusionGroup:attrs.uiExclusionGroup});}};}]);module.directive('uiState',['SharedState',function(SharedState){return{restrict:'EA',priority:601,link:function(scope,elem,attrs){var id=attrs.uiState||attrs.id;var defaultValueExpr=attrs.uiDefault||attrs.default;var defaultValue=defaultValueExpr?scope.$eval(defaultValueExpr):undefined;SharedState.initialize(scope,id,{defaultValue:defaultValue,exclusionGroup:attrs.uiExclusionGroup});}};}]);angular.forEach(['toggle','turnOn','turnOff','set'],function(methodName){var directiveName='ui'+methodName[0].toUpperCase()+methodName.slice(1);module.directive(directiveName,['$parse','$interpolate','SharedState',function($parse,$interpolate,SharedState){var method=SharedState[methodName];return{restrict:'A',priority:1,compile:function(elem,attrs){var attr=attrs[directiveName];var needsInterpolation=attr.match(/\{\{/);var exprFn=function($scope){var res=attr;if(needsInterpolation){var interpolateFn=$interpolate(res);res=interpolateFn($scope);}if(methodName==='set'){res=($parse(res))($scope);}return res;};return function(scope,elem,attrs){var callback=function(){var arg=exprFn(scope);return method.call(SharedState,arg);};uiBindEvent(scope,elem,attrs.uiTriggers,callback);};}};}]);});var parseScopeContext=function(attr){if(!attr||attr===''){return[];}var vars=attr?attr.trim().split(/ *, */):[];var res=[];for(var i=0;i<vars.length;i++){var item=vars[i].split(/ *as */);if(item.length>2||item.length<1){throw new Error('Error parsing uiScopeContext="'+attr+'"');}res.push(item);}return res;};var mixScopeContext=function(context,scopeVars,scope){for(var i=0;i<scopeVars.length;i++){var key=scopeVars[i][0];var alias=scopeVars[i][1]||key;context[alias]=key.split('.').reduce(function(scope,nextKey){return scope[nextKey];},scope);}};var parseUiCondition=function(name,attrs,$scope,SharedState,$parse,$interpolate){var expr=attrs[name];var needsInterpolation=expr.match(/\{\{/);var exprFn;if(needsInterpolation){exprFn=function(context){var interpolateFn=$interpolate(expr);var parseFn=$parse(interpolateFn($scope));return parseFn(context);};}else{exprFn=$parse(expr);}var uiScopeContext=parseScopeContext(attrs.uiScopeContext);return function(){var context;if(uiScopeContext.length){context=angular.extend({},SharedState.values());mixScopeContext(context,uiScopeContext,$scope);}else{context=SharedState.values();}return exprFn(context);};};module.directive('uiIf',['$animate','SharedState','$parse','$interpolate',function($animate,SharedState,$parse,$interpolate){function getBlockNodes(nodes){var node=nodes[0];var endNode=nodes[nodes.length-1];var blockNodes=[node];do{node=node.nextSibling;if(!node){break;}blockNodes.push(node);}while(node!==endNode);return angular.element(blockNodes);}return{multiElement:true,transclude:'element',priority:600,terminal:true,restrict:'A',$$tlb:true,link:function($scope,$element,$attr,ctrl,$transclude){var block;var childScope;var previousElements;var uiIfFn=parseUiCondition('uiIf',$attr,$scope,SharedState,$parse,$interpolate);$scope.$watch(uiIfFn,function uiIfWatchAction(value){if(value){if(!childScope){$transclude(function(clone,newScope){childScope=newScope;clone[clone.length++]=document.createComment(' end uiIf: '+$attr.uiIf+' ');block={clone:clone};$animate.enter(clone,$element.parent(),$element);});}}else{if(previousElements){previousElements.remove();previousElements=null;}if(childScope){childScope.$destroy();childScope=null;}if(block){previousElements=getBlockNodes(block.clone);var done=function(){previousElements=null;};var nga=$animate.leave(previousElements,done);if(nga){nga.then(done);}block=null;}}});}};}]);module.directive('uiHide',['$animate','SharedState','$parse','$interpolate',function($animate,SharedState,$parse,$interpolate){var NG_HIDE_CLASS='ng-hide';var NG_HIDE_IN_PROGRESS_CLASS='ng-hide-animate';return{restrict:'A',multiElement:true,link:function(scope,element,attr){var uiHideFn=parseUiCondition('uiHide',attr,scope,SharedState,$parse,$interpolate);scope.$watch(uiHideFn,function uiHideWatchAction(value){$animate[value?'addClass':'removeClass'](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS});});}};}]);module.directive('uiShow',['$animate','SharedState','$parse','$interpolate',function($animate,SharedState,$parse){var NG_HIDE_CLASS='ng-hide';var NG_HIDE_IN_PROGRESS_CLASS='ng-hide-animate';return{restrict:'A',multiElement:true,link:function(scope,element,attr){var uiShowFn=parseUiCondition('uiShow',attr,scope,SharedState,$parse);scope.$watch(uiShowFn,function uiShowWatchAction(value){$animate[value?'removeClass':'addClass'](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS});});}};}]);module.directive('uiClass',['SharedState','$parse','$interpolate',function(SharedState,$parse){return{restrict:'A',link:function(scope,element,attr){var uiClassFn=parseUiCondition('uiClass',attr,scope,SharedState,$parse);scope.$watch(uiClassFn,function uiClassWatchAction(value){var classesToAdd='';var classesToRemove='';angular.forEach(value,function(expr,className){if(expr){classesToAdd+=' '+className;}else{classesToRemove+=' '+className;}classesToAdd=classesToAdd.trim();classesToRemove=classesToRemove.trim();if(classesToAdd.length){element.addClass(classesToAdd);}if(classesToRemove.length){element.removeClass(classesToRemove);}});},true);}};}]);module.run(['$rootScope','SharedState',function($rootScope,SharedState){$rootScope.Ui=SharedState;}]);})();(function(){'use strict';var module=angular.module('mobile-angular-ui.core.touchmoveDefaults',[]);module.directive('uiPreventTouchmoveDefaults',function(){var preventTouchmoveDefaultsCb=function(e){var allowTouchmoveEventFlag=e.originalEvent?e.originalEvent.allowTouchmoveDefault:e.allowTouchmoveDefault;if(allowTouchmoveEventFlag!==true){e.preventDefault();}};return{compile:function(element){if('ontouchmove'in document){element.on('touchmove',preventTouchmoveDefaultsCb);}}};});module.factory('allowTouchmoveDefault',function(){var fnTrue=function(){return true;};if('ontouchmove'in document){return function($element,condition){condition=condition||fnTrue;var allowTouchmoveDefaultCallback=function(e){if(condition(e)){e.allowTouchmoveDefault=true;if(e.originalEvent){e.originalEvent.allowTouchmoveDefault=true;}}};$element=angular.element($element);$element.on('touchmove',allowTouchmoveDefaultCallback);$element.on('$destroy',function(){$element.off('touchmove',allowTouchmoveDefaultCallback);$element=null;});return function(){if($element){$element.off('touchmove',allowTouchmoveDefaultCallback);}};};}return angular.noop;});})();(function(){'use strict';angular.module('mobile-angular-ui.core',['mobile-angular-ui.core.fastclick','mobile-angular-ui.core.activeLinks','mobile-angular-ui.core.capture','mobile-angular-ui.core.outerClick','mobile-angular-ui.core.sharedState','mobile-angular-ui.core.touchmoveDefaults']);})();(function(w,undefined){var doc=w.document,docElem=doc.documentElement,enabledClassName="overthrow-enabled",canBeFilledWithPoly="ontouchmove"in doc,nativeOverflow="WebkitOverflowScrolling"in docElem.style||"msOverflowStyle"in docElem.style||(!canBeFilledWithPoly&&w.screen.width>800)||(function(){var ua=w.navigator.userAgent,webkit=ua.match(/AppleWebKit\/([0-9]+)/),wkversion=webkit&&webkit[1],wkLte534=webkit&&wkversion>=534;return(ua.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&wkLte534||ua.match(/ Version\/([0-9]+)/)&&RegExp.$1>=0&&w.blackberry&&wkLte534||ua.indexOf("PlayBook")>-1&&wkLte534&&!ua.indexOf("Android 2")===-1||ua.match(/Firefox\/([0-9]+)/)&&RegExp.$1>=4||ua.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&wkLte534||ua.match(/NokiaBrowser\/([0-9\.]+)/)&&parseFloat(RegExp.$1)===7.3&&webkit&&wkversion>=533);})();w.overthrow={};w.overthrow.enabledClassName=enabledClassName;w.overthrow.addClass=function(){if(docElem.className.indexOf(w.overthrow.enabledClassName)===-1){docElem.className+=" "+w.overthrow.enabledClassName;}};w.overthrow.removeClass=function(){docElem.className=docElem.className.replace(w.overthrow.enabledClassName,"");};w.overthrow.set=function(){if(nativeOverflow){w.overthrow.addClass();}};w.overthrow.canBeFilledWithPoly=canBeFilledWithPoly;w.overthrow.forget=function(){w.overthrow.removeClass();};w.overthrow.support=nativeOverflow?"native":"none";})(this);(function(w,undefined){w.overthrow.set();}(this));(function(w,o,undefined){if(o===undefined){return;}o.scrollIndicatorClassName="overthrow";var doc=w.document,docElem=doc.documentElement,nativeOverflow=o.support==="native",canBeFilledWithPoly=o.canBeFilledWithPoly,configure=o.configure,set=o.set,forget=o.forget,scrollIndicatorClassName=o.scrollIndicatorClassName;o.closest=function(target,ascend){return!ascend&&target.className&&target.className.indexOf(scrollIndicatorClassName)>-1&&target||o.closest(target.parentNode);};var enabled=false;o.set=function(){set();if(enabled||nativeOverflow||!canBeFilledWithPoly){return;}w.overthrow.addClass();enabled=true;o.support="polyfilled";o.forget=function(){forget();enabled=false;if(doc.removeEventListener){doc.removeEventListener("touchstart",start,false);}};var elem,lastTops=[],lastLefts=[],lastDown,lastRight,resetVertTracking=function(){lastTops=[];lastDown=null;},resetHorTracking=function(){lastLefts=[];lastRight=null;},inputs,setPointers=function(val){inputs=elem.querySelectorAll("textarea, input");for(var i=0,il=inputs.length;i<il;i++){inputs[i].style.pointerEvents=val;}},changeScrollTarget=function(startEvent,ascend){if(doc.createEvent){var newTarget=(!ascend||ascend===undefined)&&elem.parentNode||elem.touchchild||elem,tEnd;if(newTarget!==elem){tEnd=doc.createEvent("HTMLEvents");tEnd.initEvent("touchend",true,true);elem.dispatchEvent(tEnd);newTarget.touchchild=elem;elem=newTarget;newTarget.dispatchEvent(startEvent);}}},start=function(e){if(o.intercept){o.intercept();}resetVertTracking();resetHorTracking();elem=o.closest(e.target);if(!elem||elem===docElem||e.touches.length>1){return;}setPointers("none");var touchStartE=e,scrollT=elem.scrollTop,scrollL=elem.scrollLeft,height=elem.offsetHeight,width=elem.offsetWidth,startY=e.touches[0].pageY,startX=e.touches[0].pageX,scrollHeight=elem.scrollHeight,scrollWidth=elem.scrollWidth,move=function(e){var ty=scrollT+startY-e.touches[0].pageY,tx=scrollL+startX-e.touches[0].pageX,down=ty>=(lastTops.length?lastTops[0]:0),right=tx>=(lastLefts.length?lastLefts[0]:0);if((ty>0&&ty<scrollHeight-height)||(tx>0&&tx<scrollWidth-width)){e.preventDefault();}else{changeScrollTarget(touchStartE);}if(lastDown&&down!==lastDown){resetVertTracking();}if(lastRight&&right!==lastRight){resetHorTracking();}lastDown=down;lastRight=right;elem.scrollTop=ty;elem.scrollLeft=tx;lastTops.unshift(ty);lastLefts.unshift(tx);if(lastTops.length>3){lastTops.pop();}if(lastLefts.length>3){lastLefts.pop();}},end=function(e){setPointers("auto");setTimeout(function(){setPointers("none");},450);elem.removeEventListener("touchmove",move,false);elem.removeEventListener("touchend",end,false);};elem.addEventListener("touchmove",move,false);elem.addEventListener("touchend",end,false);};doc.addEventListener("touchstart",start,false);};})(this,this.overthrow);(function(){'use strict';angular.module('mobile-angular-ui.components.modals',[]).directive('modal',['$rootElement',function($rootElement){return{restrict:'C',link:function(scope,elem){$rootElement.addClass('has-modal');elem.on('$destroy',function(){$rootElement.removeClass('has-modal');});scope.$on('$destroy',function(){$rootElement.removeClass('has-modal');});if(elem.hasClass('modal-overlay')){$rootElement.addClass('has-modal-overlay');elem.on('$destroy',function(){$rootElement.removeClass('has-modal-overlay');});scope.$on('$destroy',function(){$rootElement.removeClass('has-modal-overlay');});}}};}]);})();(function(){'use strict';var module=angular.module('mobile-angular-ui.components.navbars',[]);angular.forEach(['top','bottom'],function(side){var directiveName='navbarAbsolute'+side.charAt(0).toUpperCase()+side.slice(1);module.directive(directiveName,['$rootElement',function($rootElement){return{restrict:'C',link:function(scope){$rootElement.addClass('has-navbar-'+side);scope.$on('$destroy',function(){$rootElement.removeClass('has-navbar-'+side);});}};}]);});})();(function(){'use strict';var module=angular.module('mobile-angular-ui.components.scrollable',['mobile-angular-ui.core.touchmoveDefaults']);var getTouchY=function(event){var touches=event.touches&&event.touches.length?event.touches:[event];var e=(event.changedTouches&&event.changedTouches[0])||(event.originalEvent&&event.originalEvent.changedTouches&&event.originalEvent.changedTouches[0])||touches[0].originalEvent||touches[0];return e.clientY;};module.directive('scrollableContent',function(){return{restrict:'C',controller:['$element','$document','allowTouchmoveDefault',function($element,$document,allowTouchmoveDefault){var scrollableContent=$element[0];var scrollable=$element.parent()[0];if('ontouchmove'in $document[0]){var allowUp;var allowDown;var lastY;var setupTouchstart=function(event){allowUp=(scrollableContent.scrollTop>0);allowDown=(scrollableContent.scrollTop<scrollableContent.scrollHeight-scrollableContent.clientHeight);lastY=getTouchY(event);};$element.on('touchstart',setupTouchstart);$element.on('$destroy',function(){$element.off('touchstart');});allowTouchmoveDefault($element,function(event){var currY=getTouchY(event);var up=(currY>lastY);var down=!up;lastY=currY;return(up&&allowUp)||(down&&allowDown);});}this.scrollableContent=scrollableContent;this.scrollTo=function(elementOrNumber,marginTop){marginTop=marginTop||0;if(angular.isNumber(elementOrNumber)){scrollableContent.scrollTop=elementOrNumber-marginTop;}else{var target=angular.element(elementOrNumber)[0];if((!target.offsetParent)||target.offsetParent===scrollable){scrollableContent.scrollTop=target.offsetTop-marginTop;}else{this.scrollTo(target.offsetParent,marginTop-target.offsetTop);}}};}],link:function(scope,element){if(overthrow.support!=='native'){element.addClass('overthrow');overthrow.forget();overthrow.set();}}};});angular.forEach(['input','textarea'],function(directiveName){module.directive(directiveName,['$rootScope','$timeout',function($rootScope,$timeout){return{require:'?^^scrollableContent',link:function(scope,elem,attrs,scrollable){elem.on('focus',function(){if(scrollable&&scrollable.scrollableContent){var h1=scrollable.scrollableContent.offsetHeight;$timeout(function(){var h2=scrollable.scrollableContent.offsetHeight;if(h1>h2){var marginTop=10;var scrollableHeader=scrollable.scrollableContent.parentElement.querySelector('.scrollable-header');if(scrollableHeader){marginTop=(scrollableHeader.getBoundingClientRect().bottom-scrollableHeader.getBoundingClientRect().top)+marginTop;}scrollable.scrollTo(elem,marginTop);}},500);}});}};}]);});angular.forEach({uiScrollTop:function(elem){return elem.scrollTop===0;},uiScrollBottom:function(elem){return elem.scrollHeight===elem.scrollTop+elem.clientHeight;}},function(reached,directiveName){module.directive(directiveName,[function(){return{restrict:'A',link:function(scope,elem,attrs){elem.on('scroll',function(){if(reached(elem[0])){scope.$apply(function(){scope.$eval(attrs[directiveName]);});}});}};}]);});angular.forEach({Top:'scrollableHeader',Bottom:'scrollableFooter'},function(directiveName,side){module.directive(directiveName,['$window',function($window){return{restrict:'C',link:function(scope,element){var el=element[0];var parentStyle=element.parent()[0].style;var adjustParentPadding=function(){var styles=$window.getComputedStyle(el);var margin=parseInt(styles.marginTop,10)+parseInt(styles.marginBottom,10);parentStyle['padding'+side]=el.offsetHeight+margin+'px';};var interval=setInterval(adjustParentPadding,30);element.on('$destroy',function(){parentStyle['padding'+side]=null;clearInterval(interval);interval=adjustParentPadding=element=null;});}};}]);});})();(function(){'use strict';var module=angular.module('mobile-angular-ui.components.sidebars',['mobile-angular-ui.core.sharedState','mobile-angular-ui.core.outerClick']);angular.forEach(['left','right'],function(side){var directiveName='sidebar'+side.charAt(0).toUpperCase()+side.slice(1);var defaultStateName='ui'+directiveName.charAt(0).toUpperCase()+directiveName.slice(1);module.directive(directiveName,['$rootElement','SharedState','bindOuterClick','$location',function($rootElement,SharedState,bindOuterClick,$location){return{restrict:'C',link:function(scope,elem,attrs){var parentClass='has-sidebar-'+side;var visibleClass='sidebar-'+side+'-visible';var activeClass='sidebar-'+side+'-in';var stateName=attrs.id?attrs.id:defaultStateName;var trackAsSearchParam=attrs.uiTrackAsSearchParam===''||attrs.uiTrackAsSearchParam;var outerClickCb=function(){SharedState.turnOff(stateName);};var outerClickIf=function(){return SharedState.isActive(stateName);};$rootElement.addClass(parentClass);scope.$on('$destroy',function(){$rootElement.removeClass(parentClass);$rootElement.removeClass(visibleClass);$rootElement.removeClass(activeClass);});var defaultActive=attrs.active!==undefined&&attrs.active!=='false';SharedState.initialize(scope,stateName,{defaultValue:defaultActive});scope.$on('mobile-angular-ui.state.changed.'+stateName,function(e,active){if(trackAsSearchParam){$location.search(stateName,active||null);}if(active){$rootElement.addClass(visibleClass);$rootElement.addClass(activeClass);}else{$rootElement.removeClass(activeClass);}});scope.$on('$routeChangeSuccess',function(){SharedState.turnOff(stateName);});scope.$on('$routeUpdate',function(){if(trackAsSearchParam){if(($location.search())[stateName]){SharedState.turnOn(stateName);}else{SharedState.turnOff(stateName);}}});scope.$on('mobile-angular-ui.app.transitionend',function(){if(!SharedState.isActive(stateName)){$rootElement.removeClass(visibleClass);}});if(attrs.closeOnOuterClicks!=='false'){bindOuterClick(scope,elem,outerClickCb,outerClickIf);}}};}]);});module.directive('app',['$rootScope',function($rootScope){return{restrict:'C',link:function(scope,element){element.on('transitionend webkitTransitionEnd oTransitionEnd otransitionend',function(){$rootScope.$broadcast('mobile-angular-ui.app.transitionend');});}};}]);})();(function(){'use strict';angular.module('mobile-angular-ui.components.switch',[]).directive('uiSwitch',['$injector',function($injector){var $drag=$injector.has('$drag')&&$injector.get('$drag');return{restrict:'EA',scope:{model:'=ngModel',changeExpr:'@ngChange'},link:function(scope,elem,attrs){elem.addClass('switch');var disabled=attrs.disabled||elem.attr('disabled');var unwatchDisabled=scope.$watch(function(){return attrs.disabled||elem.attr('disabled');},function(value){if(!value||value==='false'||value==='0'){disabled=false;}else{disabled=true;}});var handle=angular.element('<div class="switch-handle"></div>');elem.append(handle);if(scope.model){elem.addClass('active');}elem.addClass('switch-transition-enabled');var unwatch=scope.$watch('model',function(value){if(value){elem.addClass('active');}else{elem.removeClass('active');}});var setModel=function(value){if(!disabled&&(value!==scope.model)){scope.model=value;scope.$apply();if(scope.changeExpr!==null&&scope.changeExpr!==undefined){scope.$parent.$eval(scope.changeExpr);}}};var clickCb=function(){setModel(!scope.model);};elem.on('click tap',clickCb);var unbind=angular.noop;if($drag){unbind=$drag.bind(handle,{transform:$drag.TRANSLATE_INSIDE(elem),start:function(){elem.off('click tap',clickCb);},cancel:function(){handle.removeAttr('style');elem.off('click tap',clickCb);elem.on('click tap',clickCb);},end:function(){var rh=handle[0].getBoundingClientRect();var re=elem[0].getBoundingClientRect();if(rh.left-re.left<rh.width/3){setModel(false);handle.removeAttr('style');}else if(re.right-rh.right<rh.width/3){setModel(true);handle.removeAttr('style');}else{handle.removeAttr('style');}elem.on('click tap',clickCb);}});}elem.on('$destroy',function(){unbind();unwatchDisabled();unwatch();setModel=unbind=unwatch=unwatchDisabled=clickCb=null;});}};}]);})();(function(){'use strict';angular.module('mobile-angular-ui.components',['mobile-angular-ui.components.modals','mobile-angular-ui.components.navbars','mobile-angular-ui.components.sidebars','mobile-angular-ui.components.scrollable','mobile-angular-ui.components.switch']);})();(function(){'use strict';angular.module('mobile-angular-ui',['mobile-angular-ui.core','mobile-angular-ui.components']);})();